<div class="container">
  <div class="row">

    <mat-horizontal-stepper #stepper>
      <mat-step [stepControl]="EnvironmentGeneralForm">
        <form [formGroup]="EnvironmentGeneralForm">
          <ng-template matStepLabel>Environment General Information</ng-template>
          <input type='file' (change)="onSelectFile($event)"><br /><br />
  <div class="section">
    <span class="sectionTitle">General</span>
          <div class="field-container">
            <div class="popup" align="end">
              <mat-icon align="end" svgIcon="info" (mouseenter)="infoPopUp('name_info')" (mouseleave)="infoPopUp('name_info')">
              </mat-icon>
              <span class="popuptext" id="name_info">{{EnvironmentGeneralComponent.nameField.description}}</span>
            </div>
            <mat-form-field class="full-width">

              <input matInput placeholder="Environment Name" formControlName="name" required>

              <mat-hint align="start">{{EnvironmentGeneralComponent.nameField.description}}</mat-hint>

              <mat-error *ngFor="let validation of EnvironmentGeneralComponent.nameField.validationMsg">
                <mat-error class="error-message" *ngIf="EnvironmentGeneralForm.get('name').hasError(validation.type) && (EnvironmentGeneralForm.get('name').dirty || EnvironmentGeneralForm.get('name').touched)">{{validation.message}}</mat-error>
              </mat-error>
            </mat-form-field>
          </div>

          <div class="field-container">
            <div class="popup" align="end">
              <mat-icon align="end" svgIcon="info" (mouseenter)="infoPopUp('chefWSAddress_info')" (mouseleave)="infoPopUp('chefWSAddress_info')">
              </mat-icon>
              <span class="popuptext" id="chefWSAddress_info">{{EnvironmentGeneralComponent.chefWSField.description}}</span>
            </div>
            <mat-form-field class="full-width">
              <input matInput placeholder="Chef Workstation ip" formControlName="chefWSAddress" required>
              <mat-hint align="start">{{EnvironmentGeneralComponent.chefWSField.description}}</mat-hint>
              <mat-error *ngFor="let validation of EnvironmentGeneralComponent.chefWSField.validationMsg">
                <mat-error class="error-message" *ngIf="EnvironmentGeneralForm.get('chefWSAddress').hasError(validation.type) && (EnvironmentGeneralForm.get('chefWSAddress').dirty || EnvironmentGeneralForm.get('chefWSAddress').touched)">{{validation.message}}</mat-error>
              </mat-error>
            </mat-form-field>
          </div>
        </div>
          <div class="field-container">
            <div class="popup" align="end">
              <mat-icon align="end" svgIcon="info" (mouseenter)="infoPopUp('ntp_info')" (mouseleave)="infoPopUp('ntp_info')">
              </mat-icon>
              <span class="popuptext" id="ntp_info">{{EnvironmentGeneralComponent.ntpField.description}}</span>
            </div>
            <mat-form-field class="full-width">
              <input matInput placeholder="NTP Server Address" formControlName="ntpServers" required>
              <mat-hint align="start">{{EnvironmentGeneralComponent.ntpField.description}}</mat-hint>
              <mat-error *ngFor="let validation of EnvironmentGeneralComponent.ntpField.validationMsg">
                <mat-error class="error-message" *ngIf="EnvironmentGeneralForm.get('ntpServers').hasError(validation.type) && (EnvironmentGeneralForm.get('ntpServers').dirty || EnvironmentGeneralForm.get('ntpServers').touched)">{{validation.message}}</mat-error>
              </mat-error>
            </mat-form-field>
          </div>

          <div class="field-container">
            <div class="popup" align="end">
              <mat-icon align="end" svgIcon="info" (mouseenter)="infoPopUp('OTTree_info')" (mouseleave)="infoPopUp('OTTree_info')">
              </mat-icon>
              <span class="popuptext" id="OTTree_info">{{EnvironmentGeneralComponent.OTTreeLocationField.description}}</span>
            </div>
            <mat-form-field class="full-width">
              <input matInput placeholder="OTTree Location" formControlName="OTTree" required>
              <mat-hint align="start">{{EnvironmentGeneralComponent.OTTreeLocationField.description}}</mat-hint>
              <mat-error *ngFor="let validation of EnvironmentGeneralComponent.OTTreeLocationField.validationMsg">
                <mat-error class="error-message" *ngIf="EnvironmentGeneralForm.get('OTTree').hasError(validation.type) && (EnvironmentGeneralForm.get('OTTree').dirty || EnvironmentGeneralForm.get('OTTree').touched)">{{validation.message}}</mat-error>
              </mat-error>
            </mat-form-field>
          </div>

          <div class="field-container">
            <div class="popup" align="end">
              <mat-icon align="end" svgIcon="info" (mouseenter)="infoPopUp('linuxVersion_info')" (mouseleave)="infoPopUp('linuxVersion_info')">
              </mat-icon>
              <span class="popuptext" id="linuxVersion_info">Linux Version Info!</span>
            </div>
            <mat-form-field class="full-width">
              <mat-select placeholder="Linux Version" formControlName="linuxVersions">
                <mat-option *ngFor="let lnxversion of EnvironmentGeneralComponent.linuxVersionField.options" [value]="lnxversion">
                  {{ lnxversion }}
                </mat-option>
              </mat-select>
              <mat-hint align="start">{{EnvironmentGeneralComponent.linuxVersionField.description}}</mat-hint>
              <mat-error *ngFor="let validation of EnvironmentGeneralComponent.linuxVersionField.validationMsg">
                <mat-error class="error-message" *ngIf="EnvironmentGeneralForm.get('linuxVersions').hasError(validation.type) && (EnvironmentGeneralForm.get('linuxVersions').dirty || EnvironmentGeneralForm.get('linuxVersions').touched)">{{validation.message}}</mat-error>
              </mat-error>
            </mat-form-field>
          </div>

          <div class="field-container">
            <div class="popup" align="end">
              <mat-icon align="end" svgIcon="info" (mouseenter)="infoPopUp('environmenttype_info')" (mouseleave)="infoPopUp('environmenttype_info')">
              </mat-icon>
              <span class="popuptext" id="environmenttype_info">Environment Type Info!</span>
            </div>
            <mat-form-field class="full-width">
              <mat-select placeholder="Environment Type" formControlName="environmenttype" #envType>
                <mat-option *ngFor="let envType of EnvironmentGeneralComponent.environmentTypeField.options" [value]="envType">
                  {{ envType }}
                </mat-option>
              </mat-select>
              <mat-hint align="start">{{EnvironmentGeneralComponent.environmentTypeField.description}}</mat-hint>
              <mat-error *ngFor="let validation of EnvironmentGeneralComponent.environmentTypeField.validationMsg">
                <mat-error class="error-message" *ngIf="EnvironmentGeneralForm.get('environmenttype').hasError(validation.type) && (EnvironmentGeneralForm.get('environmenttype').dirty || EnvironmentGeneralForm.get('environmenttype').touched)">{{validation.message}}</mat-error>
              </mat-error>
            </mat-form-field>
          </div>

          <div class="field-container">
            <div class="popup" align="end">
              <mat-icon align="end" svgIcon="info" (mouseenter)="infoPopUp('industries_info')" (mouseleave)="infoPopUp('industries_info')">
              </mat-icon>
              <span class="popuptext" id="industries_info">Industries Info!</span>
            </div>
            <mat-form-field class="full-width">
              <mat-select placeholder="Industry Type" formControlName="industries">
                <mat-option *ngFor="let industryType of EnvironmentGeneralComponent.industryField.options" [value]="industryType">
                  {{ industryType }}
                </mat-option>
              </mat-select>
              <mat-hint align="start">{{EnvironmentGeneralComponent.industryField.description}}</mat-hint>
              <mat-error *ngFor="let validation of EnvironmentGeneralComponent.industryField.validationMsg">
                <mat-error class="error-message" *ngIf="EnvironmentGeneralForm.get('industries').hasError(validation.type) && (EnvironmentGeneralForm.get('industries').dirty || EnvironmentGeneralForm.get('industries').touched)">{{validation.message}}</mat-error>
              </mat-error>
            </mat-form-field>
          </div>
          <mat-checkbox formControlName="RserverIncluded" #RServerIncluded>
            Install R server
          </mat-checkbox>
          <br><br>
          <mat-checkbox formControlName="IsCloudEnv">
            Cloud Environment
          </mat-checkbox>

          <div>
            <button class="submit-btn" mat-button [disabled]="!EnvironmentGeneralForm.valid" matStepperNext>Next</button>
          </div>

        </form>
      </mat-step>

      <mat-step [stepControl]="SQLConnForm">
        <form [formGroup]="SQLConnForm">
          <ng-template matStepLabel>SQL Connection</ng-template>
          <div class="field-container">
            <div class="popup" align="end">
              <mat-icon align="end" svgIcon="info" (mouseenter)="infoPopUp('SQLHostName_info')" (mouseleave)="infoPopUp('SQLHostName_info')">
              </mat-icon>
              <span class="popuptext" id="SQLHostName_info">{{SQLConnComponent.HostField.description}}</span>
            </div>
            <mat-form-field class="full-width">

              <input matInput placeholder="SQL Host Name" formControlName="SQLHostName" required>

              <mat-hint align="start">{{SQLConnComponent.HostField.description}}</mat-hint>

              <mat-error *ngFor="let validation of SQLConnComponent.HostField.validationMsg">
                <mat-error class="error-message" *ngIf="SQLConnForm.get('SQLHostName').hasError(validation.type) && (SQLConnForm.get('SQLHostName').dirty || SQLConnForm.get('SQLHostName').touched)">{{validation.message}}</mat-error>
              </mat-error>
            </mat-form-field>
          </div>

          <div class="field-container">
            <div class="popup" align="end">
              <mat-icon align="end" svgIcon="info" (mouseenter)="infoPopUp('SQLinstanceName_info')" (mouseleave)="infoPopUp('SQLinstanceName_info')">
              </mat-icon>
              <span class="popuptext" id="SQLinstanceName_info">{{SQLConnComponent.InstanceNameField.description}}</span>
            </div>
            <mat-form-field class="full-width">

              <input matInput placeholder="SQL Instance Name" formControlName="SQLinstanceName">

              <mat-hint align="start">{{SQLConnComponent.InstanceNameField.description}}</mat-hint>
            </mat-form-field>
          </div>

          <div class="field-container">

            <div class="popup" align="end">
              <mat-icon align="end" svgIcon="info" (mouseenter)="infoPopUp('SQLDBName_info')" (mouseleave)="infoPopUp('SQLDBName_info')">
              </mat-icon>
              <span class="popuptext" id="SQLDBName_info">{{SQLConnComponent.DBNameField.description}}</span>
            </div>
            <mat-form-field class="full-width">

              <input matInput placeholder="SQL DB Name" formControlName="SQLDBName" required>

              <mat-hint align="start">{{SQLConnComponent.DBNameField.description}}</mat-hint>

              <mat-error *ngFor="let validation of SQLConnComponent.DBNameField.validationMsg">
                <mat-error class="error-message" *ngIf="SQLConnForm.get('SQLDBName').hasError(validation.type) && (SQLConnForm.get('SQLDBName').dirty || SQLConnForm.get('SQLDBName').touched)">{{validation.message}}</mat-error>
              </mat-error>
            </mat-form-field>
          </div>

          <div class="section-container">
              <div class="popup" align="end">
                  <mat-icon align="end" svgIcon="info" (mouseenter)="infoPopUp('SQLAdmin_info')" (mouseleave)="infoPopUp('SQLAdmin_info')">
                  </mat-icon>
                  <span class="popuptext" id="SQLAdmin_info">SQL Admin user info pupup</span>
                </div>
            <p class="section-title">SQL Admin User</p>
            <div class="section-components-container">
              <div class="field-container">
                <div class="popup" align="end">
                  <mat-icon align="end" svgIcon="info" (mouseenter)="infoPopUp('AdminDomain_info')" (mouseleave)="infoPopUp('AdminDomain_info')">
                  </mat-icon>
                  <span class="popuptext" id="AdminDomain_info">{{SQLConnComponent.AdminDomainField.description}}</span>
                </div>
                <mat-form-field class="full-width">
                  <input matInput placeholder="User Domain" formControlName="AdminDomain">
                  <mat-hint align="start">{{SQLConnComponent.AdminDomainField.description}}</mat-hint>
                  <mat-error *ngFor="let validation of SQLConnComponent.AdminDomainField.validationMsg">
                    <mat-error class="error-message" *ngIf="SQLConnForm.get('AdminDomain').hasError(validation.type) && (SQLConnForm.get('AdminDomain').dirty || SQLConnForm.get('AdminDomain').touched)">{{validation.message}}</mat-error>
                  </mat-error>
                </mat-form-field>
              </div>

              <div class="field-container">
                <div class="popup" align="end">
                  <mat-icon align="end" svgIcon="info" (mouseenter)="infoPopUp('AdminUser_info')" (mouseleave)="infoPopUp('AdminUser_info')">
                  </mat-icon>
                  <span class="popuptext" id="AdminUser_info">{{SQLConnComponent.AdminUserField.description}}</span>
                </div>
                <mat-form-field class="full-width">

                  <input matInput placeholder="User Name" formControlName="AdminUser" required>

                  <mat-hint align="start">{{SQLConnComponent.AdminUserField.description}}</mat-hint>
                  <mat-error *ngFor="let validation of SQLConnComponent.AdminUserField.validationMsg">
                    <mat-error class="error-message" *ngIf="SQLConnForm.get('AdminUser').hasError(validation.type) && (SQLConnForm.get('AdminUser').dirty || SQLConnForm.get('AdminUser').touched)">{{validation.message}}</mat-error>
                  </mat-error>
                </mat-form-field>
              </div>

              <div class="field-container">
                <div class="popup" align="end">
                  <mat-icon align="end" svgIcon="info" (mouseenter)="infoPopUp('AdminPassword_info')" (mouseleave)="infoPopUp('AdminPassword_info')">
                  </mat-icon>
                  <span class="popuptext" id="AdminPassword_info">{{SQLConnComponent.AdminPasswordField.description}}</span>
                </div>
                <mat-form-field class="full-width">

                  <input matInput type="password" placeholder="Password" formControlName="AdminPassword" required>

                  <mat-hint align="start">{{SQLConnComponent.AdminPasswordField.description}}</mat-hint>
                  <mat-error *ngFor="let validation of SQLConnComponent.AdminPasswordField.validationMsg">
                    <mat-error class="error-message" *ngIf="SQLConnForm.get('AdminPassword').hasError(validation.type) && (SQLConnForm.get('AdminPassword').dirty || SQLConnForm.get('AdminPassword').touched)">{{validation.message}}</mat-error>
                  </mat-error>
                </mat-form-field>
              </div>
            </div>
          </div>

          <div class="section-container">
              <div class="popup" align="end">
                  <mat-icon align="end" svgIcon="info" (mouseenter)="infoPopUp('SQLApp_info')" (mouseleave)="infoPopUp('SQLApp_info')">
                  </mat-icon>
                  <span class="popuptext" id="SQLApp_info">SQL application user info pupup</span>
                </div>
            <p class="section-title">SQL App User</p>
            <div class="section-components-container">
              <div class="field-container">
                <div class="popup" align="end">
                  <mat-icon align="end" svgIcon="info" (mouseenter)="infoPopUp('AppDomain_info')" (mouseleave)="infoPopUp('AppDomain_info')">
                  </mat-icon>
                  <span class="popuptext" id="AppDomain_info">{{SQLConnComponent.AppDomainField.description}}</span>
                </div>
                <mat-form-field class="full-width">
                  <input matInput placeholder="User Domain" formControlName="AppDomain">
                  <mat-hint align="start">{{SQLConnComponent.AppDomainField.description}}</mat-hint>
                  <mat-error *ngFor="let validation of SQLConnComponent.AppDomainField.validationMsg">
                    <mat-error class="error-message" *ngIf="SQLConnForm.get('AppDomain').hasError(validation.type) && (SQLConnForm.get('AppDomain').dirty || SQLConnForm.get('AppDomain').touched)">{{validation.message}}</mat-error>
                  </mat-error>
                </mat-form-field>
              </div>

              <div class="field-container">
                <div class="popup" align="end">
                  <mat-icon align="end" svgIcon="info" (mouseenter)="infoPopUp('AppUser_info')" (mouseleave)="infoPopUp('AppUser_info')">
                  </mat-icon>
                  <span class="popuptext" id="AppUser_info">{{SQLConnComponent.AppUserField.description}}</span>
                </div>
                <mat-form-field class="full-width">

                  <input matInput placeholder="User Name" formControlName="AppUser" required>

                  <mat-hint align="start">{{SQLConnComponent.AppUserField.description}}</mat-hint>
                  <mat-error *ngFor="let validation of SQLConnComponent.AppUserField.validationMsg">
                    <mat-error class="error-message" *ngIf="SQLConnForm.get('AppUser').hasError(validation.type) && (SQLConnForm.get('AppUser').dirty || SQLConnForm.get('AppUser').touched)">{{validation.message}}</mat-error>
                  </mat-error>
                </mat-form-field>
              </div>

              <div class="field-container">
                <div class="popup" align="end">
                  <mat-icon align="end" svgIcon="info" (mouseenter)="infoPopUp('AppPassword_info')" (mouseleave)="infoPopUp('AppPassword_info')">
                  </mat-icon>
                  <span class="popuptext" id="AppPassword_info">{{SQLConnComponent.AppPasswordField.description}}</span>
                </div>
                <mat-form-field class="full-width">

                  <input matInput type="password" placeholder="Password" formControlName="AppPassword" required>

                  <mat-hint align="start">{{SQLConnComponent.AppPasswordField.description}}</mat-hint>
                  <mat-error *ngFor="let validation of SQLConnComponent.AppPasswordField.validationMsg">
                    <mat-error class="error-message" *ngIf="SQLConnForm.get('AppPassword').hasError(validation.type) && (SQLConnForm.get('AppPassword').dirty || SQLConnForm.get('AppPassword').touched)">{{validation.message}}</mat-error>
                  </mat-error>
                </mat-form-field>
                <button (click)="testSqlConnection()">Test Connection</button>
              </div>
            </div>
          </div>




          <div>
            <button mat-button matStepperPrevious>Back</button>
            <button class="submit-btn" mat-button [disabled]="!SQLConnForm.valid" matStepperNext>Next</button>
          </div>

        </form>
      </mat-step>

      <mat-step *ngIf="EnvironmentGeneralForm.get('environmenttype').value != 'SQL'" [stepControl]="VerticaForm">
        <form [formGroup]="VerticaForm">
          <ng-template matStepLabel>Vertica</ng-template>

          <div class="field-container">
            <div class="popup" align="end">
              <mat-icon align="end" svgIcon="info" (mouseenter)="infoPopUp('verticaVersion_info')" (mouseleave)="infoPopUp('verticaVersion_info')">
              </mat-icon>
              <span class="popuptext" id="verticaVersion_info">{{VerticaComponent.versionField.description}}</span>
            </div>
            <mat-form-field class="full-width">
              <mat-select placeholder="Vertica Version" formControlName="version">
                <mat-option *ngFor="let verticaVersion of VerticaComponent.versionField.options" [value]="verticaVersion">
                  {{ verticaVersion }}
                </mat-option>
              </mat-select>
              <mat-hint align="start">{{VerticaComponent.versionField.description}}</mat-hint>
              <mat-error *ngFor="let validation of VerticaComponent.versionField.validationMsg">
                <mat-error class="error-message" *ngIf="VerticaForm.get('version').hasError(validation.type) && (EnvironmentGeneralForm.get('version').dirty || EnvironmentGeneralForm.get('version').touched)">{{validation.message}}</mat-error>
              </mat-error>
            </mat-form-field>
          </div>

          <div class="field-container">
            <div class="popup" align="end">
              <mat-icon align="end" svgIcon="info" (mouseenter)="infoPopUp('timezone_info')" (mouseleave)="infoPopUp('timezone_info')">
              </mat-icon>
              <span class="popuptext" id="timezone_info">{{VerticaComponent.TZField.description}}</span>
            </div>
            <mat-form-field class="full-width">

              <input matInput placeholder="Time Zone" formControlName="TZ" required>

              <mat-hint align="start">{{VerticaComponent.TZField.description}}</mat-hint>
              <mat-error *ngFor="let validation of VerticaComponent.TZField.validationMsg">
                <mat-error class="error-message" *ngIf="VerticaForm.get('TZ').hasError(validation.type) && (VerticaForm.get('TZ').dirty || VerticaForm.get('TZ').touched)">{{validation.message}}</mat-error>
              </mat-error>
            </mat-form-field>
          </div>

          <div class="field-container">
            <div class="popup" align="end">
              <mat-icon align="end" svgIcon="info" (mouseenter)="infoPopUp('dsn_info')" (mouseleave)="infoPopUp('dsn_info')">
              </mat-icon>
              <span class="popuptext" id="dsn_info">{{VerticaComponent.dsnField.description}}</span>
            </div>
            <mat-form-field class="full-width">

              <input matInput placeholder="DSN Name" formControlName="dsn" required>

              <mat-hint align="start">{{VerticaComponent.dsnField.description}}</mat-hint>
              <mat-error *ngFor="let validation of VerticaComponent.dsnField.validationMsg">
                <mat-error class="error-message" *ngIf="VerticaForm.get('dsn').hasError(validation.type) && (VerticaForm.get('dsn').dirty || VerticaForm.get('dsn').touched)">{{validation.message}}</mat-error>
              </mat-error>
            </mat-form-field>
          </div>

          <div class="field-container">
            <div class="popup" align="end">
              <mat-icon align="end" svgIcon="info" (mouseenter)="infoPopUp('dbName_info')" (mouseleave)="infoPopUp('dbName_info')">
              </mat-icon>
              <span class="popuptext" id="dbName_info">{{VerticaComponent.dbNameField.description}}</span>
            </div>
            <mat-form-field class="full-width">

              <input matInput readonly="true" disabled="true" placeholder="Vertica DB Name" formControlName="dbName"
                required>

              <mat-hint align="start">{{VerticaComponent.dbNameField.description}}</mat-hint>
              <mat-error *ngFor="let validation of VerticaComponent.dbNameField.validationMsg">
                <mat-error class="error-message" *ngIf="VerticaForm.get('dbName').hasError(validation.type) && (VerticaForm.get('dbName').dirty || VerticaForm.get('dbName').touched)">{{validation.message}}</mat-error>
              </mat-error>
            </mat-form-field>
          </div>

          <div class="field-container">
            <div class="popup" align="end">
              <mat-icon align="end" svgIcon="info" (mouseenter)="infoPopUp('schema_info')" (mouseleave)="infoPopUp('schema_info')">
              </mat-icon>
              <span class="popuptext" id="schema_info">{{VerticaComponent.schemaField.description}}</span>
            </div>
            <mat-form-field class="full-width">

              <input matInput placeholder="Schema Name" formControlName="schema" required>

              <mat-hint align="start">{{VerticaComponent.schemaField.description}}</mat-hint>
              <mat-error *ngFor="let validation of VerticaComponent.schemaField.validationMsg">
                <mat-error class="error-message" *ngIf="VerticaForm.get('schema').hasError(validation.type) && (VerticaForm.get('schema').dirty || VerticaForm.get('schema').touched)">{{validation.message}}</mat-error>
              </mat-error>
            </mat-form-field>
          </div>

          <div class="field-container">
            <div class="popup" align="end">
              <mat-icon align="end" svgIcon="info" (mouseenter)="infoPopUp('dbPass_info')" (mouseleave)="infoPopUp('dbPass_info')">
              </mat-icon>
              <span class="popuptext" id="dbPass_info">{{VerticaComponent.dbPassField.description}}</span>
            </div>
            <mat-form-field class="full-width">

              <input matInput type="password" placeholder="Vertica DB Password" formControlName="dbPass" required>

              <mat-hint align="start">{{VerticaComponent.dbPassField.description}}</mat-hint>
              <mat-error *ngFor="let validation of VerticaComponent.dbPassField.validationMsg">
                <mat-error class="error-message" *ngIf="VerticaForm.get('dbPass').hasError(validation.type) && (VerticaForm.get('dbPass').dirty || VerticaForm.get('dbPass').touched)">{{validation.message}}</mat-error>
              </mat-error>
            </mat-form-field>
          </div>

          <div class="field-container">
            <div class="popup" align="end">
              <mat-icon align="end" svgIcon="info" (mouseenter)="infoPopUp('workDir_info')" (mouseleave)="infoPopUp('workDir_info')">
              </mat-icon>
              <span class="popuptext" id="workDir_info">{{VerticaComponent.workDirField.description}}</span>
            </div>
            <mat-form-field class="full-width">

              <input matInput placeholder="O+ Working Directory" formControlName="workDir" required>

              <mat-hint align="start">{{VerticaComponent.workDirField.description}}</mat-hint>
              <mat-error *ngFor="let validation of VerticaComponent.workDirField.validationMsg">
                <mat-error class="error-message" *ngIf="VerticaForm.get('workDir').hasError(validation.type) && (VerticaForm.get('workDir').dirty || VerticaForm.get('workDir').touched)">{{validation.message}}</mat-error>
              </mat-error>
            </mat-form-field>
          </div>

          <div class="section-container">
            <div class="popup" align="end">
              <mat-icon align="end" svgIcon="info" (mouseenter)="infoPopUp('VerticaCluster_info')" (mouseleave)="infoPopUp('VerticaCluster_info')">
              </mat-icon>
              <span class="popuptext" id="VerticaCluster_info">Vertica cluster settings</span>
            </div>
            <p class="section-title">Vertica cluster Settings</p>
            <div class="section-components-container">
              <div class="field-container">
                <div class="popup" align="end">
                  <mat-icon align="end" svgIcon="info" (mouseenter)="infoPopUp('verticaHosts_info')" (mouseleave)="infoPopUp('verticaHosts_info')">
                  </mat-icon>
                  <span class="popuptext" id="verticaHosts_info">{{VerticaComponent.VerticaHostsField.description}}</span>
                </div>

                <div class="full-width" formArrayName="VerticaHosts">
                  <mat-form-field *ngFor="let host of VerticaForm.get('VerticaHosts').controls; let i=index"
                    [formGroupName]="i">

                    <input matInput placeholder="Vertica External IP {{i+1}}" formControlName="VerticaHost">
                    <mat-error *ngFor="let validation of VerticaComponent.VerticaHostField.validationMsg">
                      <mat-error class="error-message" *ngIf="VerticaForm.get('VerticaHosts').at(i).get('VerticaHost').hasError(validation.type) && (VerticaForm.get('VerticaHosts').at(i).get('VerticaHost').dirty || VerticaForm.get('VerticaHosts').at(i).get('VerticaHost').touched)">{{validation.message}}</mat-error>
                    </mat-error>
                  </mat-form-field>
                </div>

                <button (click)="removeVerticaHost()">-</button>
                <button (click)="addVerticaHost()">+</button>




              </div>

              <div class="field-container">
                <div class="popup" align="end">
                  <mat-icon align="end" svgIcon="info" (mouseenter)="infoPopUp('InternalIPs_info')" (mouseleave)="infoPopUp('InternalIPs_info')">
                  </mat-icon>
                  <span class="popuptext" id="InternalIPs_info">{{VerticaComponent.InternalIPsField.description}}</span>
                </div>

                <div class="full-width" formArrayName="InternalIPs">
                  <mat-form-field *ngFor="let host of VerticaForm.get('InternalIPs').controls; let i=index"
                    [formGroupName]="i">

                    <input matInput placeholder="Vertica Internal IP {{i+1}}" formControlName="InternalIP">
                    <mat-error *ngFor="let validation of VerticaComponent.InternalIPField.validationMsg">
                      <mat-error class="error-message" *ngIf="VerticaForm.get('InternalIPs').at(i).get('InternalIP').hasError(validation.type) && (VerticaForm.get('InternalIPs').at(i).get('InternalIP').dirty || VerticaForm.get('InternalIPs').at(i).get('InternalIP').touched)">{{validation.message}}</mat-error>
                    </mat-error>
                  </mat-form-field>
                </div>
              </div>

              <div class="field-container">
                <div class="popup" align="end">
                  <mat-icon align="end" svgIcon="info" (mouseenter)="infoPopUp('Broadcast_info')" (mouseleave)="infoPopUp('Broadcast_info')">
                  </mat-icon>
                  <span class="popuptext" id="Broadcast_info">{{VerticaComponent.BroadcastField.description}}</span>
                </div>
                <mat-form-field class="full-width">

                  <input matInput placeholder="Broadcast ip Address" formControlName="Broadcast" required>

                  <mat-hint align="start">{{VerticaComponent.BroadcastField.description}}</mat-hint>
                  <mat-error *ngFor="let validation of VerticaComponent.BroadcastField.validationMsg">
                    <mat-error class="error-message" *ngIf="VerticaForm.get('Broadcast').hasError(validation.type) && (VerticaForm.get('Broadcast').dirty || VerticaForm.get('Broadcast').touched)">{{validation.message}}</mat-error>
                  </mat-error>
                </mat-form-field>
              </div>

            </div>
          </div>

          <div class="section-container">
              <div class="popup" align="end">
                  <mat-icon align="end" svgIcon="info" (mouseenter)="infoPopUp('ExternalStorage_info')" (mouseleave)="infoPopUp('ExternalStorage_info')">
                  </mat-icon>
                  <span class="popuptext" id="ExternalStorage_info">External Storage info pupup</span>
                </div>
            <p class="section-title">External Storage for CSV</p>
            <div class="section-components-container">
              <div class="field-container">
                <div class="popup" align="end">
                  <mat-icon align="end" svgIcon="info" (mouseenter)="infoPopUp('UNCPath_info')" (mouseleave)="infoPopUp('UNCPath_info')">
                  </mat-icon>
                  <span class="popuptext" id="UNCPath_info">{{VerticaComponent.UNCPathField.description}}</span>
                </div>
                <mat-form-field class="full-width">

                  <input matInput placeholder="UNC Path" formControlName="UNCPath" required>

                  <mat-hint align="start">{{VerticaComponent.UNCPathField.description}}</mat-hint>
                  <mat-error *ngFor="let validation of VerticaComponent.UNCPathField.validationMsg">
                    <mat-error class="error-message" *ngIf="VerticaForm.get('UNCPath').hasError(validation.type) && (VerticaForm.get('UNCPath').dirty || VerticaForm.get('UNCPath').touched)">{{validation.message}}</mat-error>
                  </mat-error>
                </mat-form-field>
              </div>

              <div class="field-container">
                <div class="popup" align="end">
                  <mat-icon align="end" svgIcon="info" (mouseenter)="infoPopUp('SMBUser_info')" (mouseleave)="infoPopUp('SMBUser_info')">
                  </mat-icon>
                  <span class="popuptext" id="SMBUser_info">{{VerticaComponent.SMBUserField.description}}</span>
                </div>
                <mat-form-field class="full-width">

                  <input matInput placeholder="Samba User Name" formControlName="SMBUser" required>

                  <mat-hint align="start">{{VerticaComponent.SMBUserField.description}}</mat-hint>
                  <mat-error *ngFor="let validation of VerticaComponent.SMBUserField.validationMsg">
                    <mat-error class="error-message" *ngIf="VerticaForm.get('SMBUser').hasError(validation.type) && (VerticaForm.get('SMBUser').dirty || VerticaForm.get('SMBUser').touched)">{{validation.message}}</mat-error>
                  </mat-error>
                </mat-form-field>
              </div>

              <div class="field-container">
                <div class="popup" align="end">
                  <mat-icon align="end" svgIcon="info" (mouseenter)="infoPopUp('SMBPassword_info')" (mouseleave)="infoPopUp('SMBPassword_info')">
                  </mat-icon>
                  <span class="popuptext" id="SMBPassword_info">{{VerticaComponent.SMBPasswordField.description}}</span>
                </div>
                <mat-form-field class="full-width">

                  <input matInput type="password" placeholder="Samba User Password" formControlName="SMBPassword"
                    required>

                  <mat-hint align="start">{{VerticaComponent.SMBPasswordField.description}}</mat-hint>
                  <mat-error *ngFor="let validation of VerticaComponent.SMBPasswordField.validationMsg">
                    <mat-error class="error-message" *ngIf="VerticaForm.get('SMBPassword').hasError(validation.type) && (VerticaForm.get('SMBPassword').dirty || VerticaForm.get('SMBPassword').touched)">{{validation.message}}</mat-error>
                  </mat-error>
                </mat-form-field>
              </div>

              <div class="field-container">
                <div class="popup" align="end">
                  <mat-icon align="end" svgIcon="info" (mouseenter)="infoPopUp('SMBDomain_info')" (mouseleave)="infoPopUp('SMBDomain_info')">
                  </mat-icon>
                  <span class="popuptext" id="SMBDomain_info">{{VerticaComponent.SMBDomainField.description}}</span>
                </div>
                <mat-form-field class="full-width">

                  <input matInput placeholder="Samba User Domain" formControlName="SMBDomain" required>

                  <mat-hint align="start">{{VerticaComponent.SMBDomainField.description}}</mat-hint>
                  <mat-error *ngFor="let validation of VerticaComponent.SMBDomainField.validationMsg">
                    <mat-error class="error-message" *ngIf="VerticaForm.get('SMBDomain').hasError(validation.type) && (VerticaForm.get('SMBDomain').dirty || VerticaForm.get('SMBDomain').touched)">{{validation.message}}</mat-error>
                  </mat-error>
                </mat-form-field>
              </div>

              <div class="field-container">
                <div class="popup" align="end">
                  <mat-icon align="end" svgIcon="info" (mouseenter)="infoPopUp('MountDir_info')" (mouseleave)="infoPopUp('MountDir_info')">
                  </mat-icon>
                  <span class="popuptext" id="MountDir_info">{{VerticaComponent.MountDirField.description}}</span>
                </div>
                <mat-form-field class="full-width">

                  <input matInput placeholder="Linux Mount Path" formControlName="MountDir" required>

                  <mat-hint align="start">{{VerticaComponent.MountDirField.description}}</mat-hint>
                  <mat-error *ngFor="let validation of VerticaComponent.MountDirField.validationMsg">
                    <mat-error class="error-message" *ngIf="VerticaForm.get('MountDir').hasError(validation.type) && (VerticaForm.get('MountDir').dirty || VerticaForm.get('MountDir').touched)">{{validation.message}}</mat-error>
                  </mat-error>
                </mat-form-field>
              </div>

            </div>
          </div>

          <div class="section-container">
              <div class="popup" align="end">
                  <mat-icon align="end" svgIcon="info" (mouseenter)="infoPopUp('DeploymentCenter_info')" (mouseleave)="infoPopUp('DeploymentCenter_info')">
                  </mat-icon>
                  <span class="popuptext" id="VerticaCluster_info">Deployment Center info pupup</span>
                </div>
            <p class="section-title">Deployment Center</p>
            <div class="section-components-container">
              <div class="field-container">
                <div class="popup" align="end">
                  <mat-icon align="end" svgIcon="info" (mouseenter)="infoPopUp('VTUNCPath_info')" (mouseleave)="infoPopUp('VTUNCPath_info')">
                  </mat-icon>
                  <span class="popuptext" id="VTUNCPath_info">{{VerticaComponent.VTUNCPathField.description}}</span>
                </div>
                <mat-form-field class="full-width">

                  <input matInput placeholder="Deployment Center Location" formControlName="VTUNCPath" required>

                  <mat-hint align="start">{{VerticaComponent.VTUNCPathField.description}}</mat-hint>
                  <mat-error *ngFor="let validation of VerticaComponent.VTUNCPathField.validationMsg">
                    <mat-error class="error-message" *ngIf="VerticaForm.get('VTUNCPath').hasError(validation.type) && (VerticaForm.get('VTUNCPath').dirty || VerticaForm.get('VTUNCPath').touched)">{{validation.message}}</mat-error>
                  </mat-error>
                </mat-form-field>
              </div>

              <div class="field-container">
                <div class="popup" align="end">
                  <mat-icon align="end" svgIcon="info" (mouseenter)="infoPopUp('VTUser_info')" (mouseleave)="infoPopUp('VTUser_info')">
                  </mat-icon>
                  <span class="popuptext" id="VTUser_info">{{VerticaComponent.VTUserField.description}}</span>
                </div>
                <mat-form-field class="full-width">

                  <input matInput placeholder="Deployment Center User" formControlName="VTUser" required>

                  <mat-hint align="start">{{VerticaComponent.VTUserField.description}}</mat-hint>
                  <mat-error *ngFor="let validation of VerticaComponent.VTUserField.validationMsg">
                    <mat-error class="error-message" *ngIf="VerticaForm.get('VTUser').hasError(validation.type) && (VerticaForm.get('VTUser').dirty || VerticaForm.get('VTUser').touched)">{{validation.message}}</mat-error>
                  </mat-error>
                </mat-form-field>
              </div>

              <div class="field-container">
                <div class="popup" align="end">
                  <mat-icon align="end" svgIcon="info" (mouseenter)="infoPopUp('VTPassword_info')" (mouseleave)="infoPopUp('VTPassword_info')">
                  </mat-icon>
                  <span class="popuptext" id="VTPassword_info">{{VerticaComponent.VTPasswordField.description}}</span>
                </div>
                <mat-form-field class="full-width">

                  <input matInput type="password" placeholder="Deployment Center Password" formControlName="VTPassword"
                    required>

                  <mat-hint align="start">{{VerticaComponent.VTPasswordField.description}}</mat-hint>
                  <mat-error *ngFor="let validation of VerticaComponent.VTPasswordField.validationMsg">
                    <mat-error class="error-message" *ngIf="VerticaForm.get('VTPassword').hasError(validation.type) && (VerticaForm.get('VTPassword').dirty || VerticaForm.get('VTPassword').touched)">{{validation.message}}</mat-error>
                  </mat-error>
                </mat-form-field>
              </div>
            </div>
          </div>

          <div class="section-container">
              <div class="popup" align="end">
                  <mat-icon align="end" svgIcon="info" (mouseenter)="infoPopUp('VerticaMgm_info')" (mouseleave)="infoPopUp('VerticaMgm_info')">
                  </mat-icon>
                  <span class="popuptext" id="VerticaMgm_info">Vertica Management User info pupup</span>
                </div>
            <p class="section-title">Vertica Managment User</p>
            <div class="section-components-container">
              <div class="field-container">
                <div class="popup" align="end">
                  <mat-icon align="end" svgIcon="info" (mouseenter)="infoPopUp('MgmUser_info')" (mouseleave)="infoPopUp('MgmUser_info')">
                  </mat-icon>
                  <span class="popuptext" id="MgmUser_info">{{VerticaComponent.MgmUserField.description}}</span>
                </div>
                <mat-form-field class="full-width">

                  <input matInput placeholder="Vertica Managment User Name" formControlName="MgmUser" required>

                  <mat-hint align="start">{{VerticaComponent.MgmUserField.description}}</mat-hint>
                  <mat-error *ngFor="let validation of VerticaComponent.MgmUserField.validationMsg">
                    <mat-error class="error-message" *ngIf="VerticaForm.get('MgmUser').hasError(validation.type) && (VerticaForm.get('MgmUser').dirty || VerticaForm.get('MgmUser').touched)">{{validation.message}}</mat-error>
                  </mat-error>
                </mat-form-field>
              </div>

              <div class="field-container">
                <div class="popup" align="end">
                  <mat-icon align="end" svgIcon="info" (mouseenter)="infoPopUp('MgmPassword_info')" (mouseleave)="infoPopUp('MgmPassword_info')">
                  </mat-icon>
                  <span class="popuptext" id="MgmPassword_info">{{VerticaComponent.MgmPasswordField.description}}</span>
                </div>
                <mat-form-field class="full-width">

                  <input matInput type="password" placeholder="Vertica Managment User password" formControlName="MgmPassword"
                    required>

                  <mat-hint align="start">{{VerticaComponent.MgmPasswordField.description}}</mat-hint>
                  <mat-error *ngFor="let validation of VerticaComponent.MgmPasswordField.validationMsg">
                    <mat-error class="error-message" *ngIf="VerticaForm.get('MgmPassword').hasError(validation.type) && (VerticaForm.get('MgmPassword').dirty || VerticaForm.get('MgmPassword').touched)">{{validation.message}}</mat-error>
                  </mat-error>
                </mat-form-field>
              </div>

              <div class="field-container">
                <div class="popup" align="end">
                  <mat-icon align="end" svgIcon="info" (mouseenter)="infoPopUp('MgmGroup_info')" (mouseleave)="infoPopUp('MgmGroup_info')">
                  </mat-icon>
                  <span class="popuptext" id="MgmGroup_info">{{VerticaComponent.MgmGroupField.description}}</span>
                </div>
                <mat-form-field class="full-width">

                  <input matInput placeholder="Vertica Managment User group" formControlName="MgmGroup" required>

                  <mat-hint align="start">{{VerticaComponent.MgmGroupField.description}}</mat-hint>
                  <mat-error *ngFor="let validation of VerticaComponent.MgmGroupField.validationMsg">
                    <mat-error class="error-message" *ngIf="VerticaForm.get('MgmGroup').hasError(validation.type) && (VerticaForm.get('MgmGroup').dirty || VerticaForm.get('MgmGroup').touched)">{{validation.message}}</mat-error>
                  </mat-error>
                </mat-form-field>
              </div>

              <div class="field-container">
                <div class="popup" align="end">
                  <mat-icon align="end" svgIcon="info" (mouseenter)="infoPopUp('MgmHome_info')" (mouseleave)="infoPopUp('MgmHome_info')">
                  </mat-icon>
                  <span class="popuptext" id="MgmHome_info">{{VerticaComponent.MgmHomeField.description}}</span>
                </div>
                <mat-form-field class="full-width">

                  <input matInput placeholder="Vertica Managment User home folder" formControlName="MgmHome" required>

                  <mat-hint align="start">{{VerticaComponent.MgmHomeField.description}}</mat-hint>
                  <mat-error *ngFor="let validation of VerticaComponent.MgmHomeField.validationMsg">
                    <mat-error class="error-message" *ngIf="VerticaForm.get('MgmHome').hasError(validation.type) && (VerticaForm.get('MgmHome').dirty || VerticaForm.get('MgmHome').touched)">{{validation.message}}</mat-error>
                  </mat-error>
                </mat-form-field>
              </div>

              <mat-checkbox formControlName="MgmCreate">
                Create User
              </mat-checkbox>
            </div>
          </div>














          <mat-checkbox formControlName="thresholdNone">
            Skip Installation Warnings
          </mat-checkbox><br><br>
          <mat-checkbox formControlName="EnablePerfTest">
            Execute Vertica performance tests
          </mat-checkbox><br><br>
          <mat-checkbox *ngIf="EnvironmentGeneralForm.get('environmenttype').value == 'Hadoop'" formControlName="isHdpCollocated">
            Hadoop and Vertica collocated
          </mat-checkbox>































          <div>
            <button mat-button matStepperPrevious>Back</button>
            <button class="submit-btn" mat-button [disabled]="!VerticaForm.valid" matStepperNext>Next</button>
          </div>

        </form>
      </mat-step>

      <mat-step *ngIf="RServerIncluded.checked" [stepControl]="RForm">
        <form [formGroup]="RForm">
          <ng-template matStepLabel>R Server</ng-template>
          <div class="field-container">
            <div class="popup" align="end">
              <mat-icon align="end" svgIcon="info" (mouseenter)="infoPopUp('verticaHosts_info')" (mouseleave)="infoPopUp('verticaHosts_info')">
              </mat-icon>
              <span class="popuptext" id="verticaHosts_info">{{RComponent.RHostsField.description}}</span>
            </div>

            <div class="full-width" formArrayName="RHosts">
              <mat-form-field *ngFor="let host of RForm.get('RHosts').controls; let i=index" [formGroupName]="i">

                <input matInput placeholder="R External IP {{i+1}}" formControlName="RHost">
                <mat-error *ngFor="let validation of RComponent.RHostField.validationMsg">
                  <mat-error class="error-message" *ngIf="RForm.get('RHosts').at(i).get('RHost').hasError(validation.type) && (RForm.get('RHosts').at(i).get('RHost').dirty || RForm.get('RHosts').at(i).get('RHost').touched)">{{validation.message}}</mat-error>
                </mat-error>
              </mat-form-field>
            </div>
            <button (click)="removeRHost()">-</button>
            <button (click)="addRHost()">+</button>
          </div>

          <div class="field-container">
            <div class="popup" align="end">
              <mat-icon align="end" svgIcon="info" (mouseenter)="infoPopUp('RInput_info')" (mouseleave)="infoPopUp('RInput_info')">
              </mat-icon>
              <span class="popuptext" id="RInput_info">{{RComponent.RInputField.description}}</span>
            </div>
            <mat-form-field class="full-width">

              <input matInput placeholder="R Input path" formControlName="RInput" required>

              <mat-hint align="start">{{RComponent.RInputField.description}}</mat-hint>
              <mat-error *ngFor="let validation of RComponent.RInputField.validationMsg">
                <mat-error class="error-message" *ngIf="RForm.get('RInput').hasError(validation.type) && (RForm.get('RInput').dirty || RForm.get('RInput').touched)">{{validation.message}}</mat-error>
              </mat-error>
            </mat-form-field>
          </div>

          <div class="section-container">
              <div class="popup" align="end">
                  <mat-icon align="end" svgIcon="info" (mouseenter)="infoPopUp('RMgm_info')" (mouseleave)="infoPopUp('RMgm_info')">
                  </mat-icon>
                  <span class="popuptext" id="RMgm_info">R management user info pupup</span>
                </div>
            <p class="section-title">R Managment User</p>
            <div class="section-components-container">
              <div class="field-container">
                <div class="popup" align="end">
                  <mat-icon align="end" svgIcon="info" (mouseenter)="infoPopUp('MgmUser_info')" (mouseleave)="infoPopUp('MgmUser_info')">
                  </mat-icon>
                  <span class="popuptext" id="MgmUser_info">{{RComponent.MgmUserField.description}}</span>
                </div>
                <mat-form-field class="full-width">

                  <input matInput placeholder="R Managment User Name" formControlName="MgmUser" required>

                  <mat-hint align="start">{{RComponent.MgmUserField.description}}</mat-hint>
                  <mat-error *ngFor="let validation of RComponent.MgmUserField.validationMsg">
                    <mat-error class="error-message" *ngIf="RForm.get('MgmUser').hasError(validation.type) && (RForm.get('MgmUser').dirty || RForm.get('MgmUser').touched)">{{validation.message}}</mat-error>
                  </mat-error>
                </mat-form-field>
              </div>

              <div class="field-container">
                <div class="popup" align="end">
                  <mat-icon align="end" svgIcon="info" (mouseenter)="infoPopUp('MgmPassword_info')" (mouseleave)="infoPopUp('MgmPassword_info')">
                  </mat-icon>
                  <span class="popuptext" id="MgmPassword_info">{{RComponent.MgmPasswordField.description}}</span>
                </div>
                <mat-form-field class="full-width">

                  <input matInput type="password" placeholder="R Managment User password" formControlName="MgmPassword"
                    required>

                  <mat-hint align="start">{{RComponent.MgmPasswordField.description}}</mat-hint>
                  <mat-error *ngFor="let validation of RComponent.MgmPasswordField.validationMsg">
                    <mat-error class="error-message" *ngIf="RForm.get('MgmPassword').hasError(validation.type) && (RForm.get('MgmPassword').dirty || RForm.get('MgmPassword').touched)">{{validation.message}}</mat-error>
                  </mat-error>
                </mat-form-field>
              </div>

              <div class="field-container">
                <div class="popup" align="end">
                  <mat-icon align="end" svgIcon="info" (mouseenter)="infoPopUp('MgmGroup_info')" (mouseleave)="infoPopUp('MgmGroup_info')">
                  </mat-icon>
                  <span class="popuptext" id="MgmGroup_info">{{RComponent.MgmGroupField.description}}</span>
                </div>
                <mat-form-field class="full-width">

                  <input matInput placeholder="R Managment User group" formControlName="MgmGroup" required>

                  <mat-hint align="start">{{RComponent.MgmGroupField.description}}</mat-hint>
                  <mat-error *ngFor="let validation of RComponent.MgmGroupField.validationMsg">
                    <mat-error class="error-message" *ngIf="RForm.get('MgmGroup').hasError(validation.type) && (RForm.get('MgmGroup').dirty || RForm.get('MgmGroup').touched)">{{validation.message}}</mat-error>
                  </mat-error>
                </mat-form-field>
              </div>



              <mat-checkbox formControlName="MgmCreate">
                Create User
              </mat-checkbox>
            </div>
          </div>
          <mat-checkbox formControlName="SecureInternalFW">
            Secure Internal Firewall
          </mat-checkbox><br><br>
          <mat-checkbox formControlName="CheckExternalFW">
            Validate External Firewall Security
          </mat-checkbox>

          <div>
            <button mat-button matStepperPrevious>Back</button>
            <button class="submit-btn" mat-button [disabled]="!RForm.valid" matStepperNext>Next</button>
          </div>

        </form>
      </mat-step>

      <mat-step *ngIf="EnvironmentGeneralForm.get('environmenttype').value == 'Hadoop'" [stepControl]="userDetailsForm">
        <form [formGroup]="userDetailsForm" (ngSubmit)="onSubmitUserDetails(userDetailsForm.value)">
          <ng-template matStepLabel>Hadoop</ng-template>



          <div>
            <button mat-button matStepperPrevious>Back</button>
            <button class="submit-btn" mat-button matStepperNext>Next</button>
          </div>

        </form>
      </mat-step>

      <mat-step *ngIf="EnvironmentGeneralForm.get('industries').value != 'semi'" [stepControl]="KafkaForm">
        <form [formGroup]="KafkaForm">
          <ng-template matStepLabel>Kafka</ng-template>
          <div class="field-container">
            <div class="popup" align="end">
              <mat-icon align="end" svgIcon="info" (mouseenter)="infoPopUp('KafkaHosts_info')" (mouseleave)="infoPopUp('KafkaHosts_info')">
              </mat-icon>
              <span class="popuptext" id="KafkaHosts_info">{{KafkaComponent.KafkaHostsField.description}}</span>
            </div>

            <div class="full-width" formArrayName="KafkaHosts">
              <mat-form-field *ngFor="let host of KafkaForm.get('KafkaHosts').controls; let i=index" [formGroupName]="i">

                <input matInput placeholder="Kafka External IP {{i+1}}" formControlName="KafkaHost">
                <mat-error *ngFor="let validation of KafkaComponent.KafkaHostField.validationMsg">
                  <mat-error class="error-message" *ngIf="KafkaForm.get('KafkaHosts').at(i).get('KafkaHost').hasError(validation.type) && (KafkaForm.get('KafkaHosts').at(i).get('KafkaHost').dirty || KafkaForm.get('KafkaHosts').at(i).get('KafkaHost').touched)">{{validation.message}}</mat-error>
                </mat-error>
              </mat-form-field>
            </div>

            <button (click)="removeKafkaHost()">-</button>
            <button (click)="addKafkaHost()">+</button>




          </div>

          <div class="field-container">
            <div class="popup" align="end">
              <mat-icon align="end" svgIcon="info" (mouseenter)="infoPopUp('ZKHosts_info')" (mouseleave)="infoPopUp('ZKHosts_info')">
              </mat-icon>
              <span class="popuptext" id="ZKHosts_info">{{KafkaComponent.ZKHostsField.description}}</span>
            </div>

            <div class="full-width" formArrayName="ZKHosts">
              <mat-form-field *ngFor="let host of KafkaForm.get('ZKHosts').controls; let i=index" [formGroupName]="i">

                <input matInput placeholder="ZooKeeper External IP {{i+1}}" formControlName="ZKHost">
                <mat-error *ngFor="let validation of KafkaComponent.ZKHostField.validationMsg">
                  <mat-error class="error-message" *ngIf="KafkaForm.get('ZKHosts').at(i).get('ZKHost').hasError(validation.type) && (KafkaForm.get('ZKHosts').at(i).get('ZKHost').dirty || KafkaForm.get('ZKHosts').at(i).get('ZKHost').touched)">{{validation.message}}</mat-error>
                </mat-error>
              </mat-form-field>
            </div>

            <button (click)="removeZKHost()">-</button>
            <button (click)="addZKHost()">+</button>

          </div>

          <div class="field-container">
            <div class="popup" align="end">
              <mat-icon align="end" svgIcon="info" (mouseenter)="infoPopUp('Logs_info')" (mouseleave)="infoPopUp('Logs_info')">
              </mat-icon>
              <span class="popuptext" id="Logs_info">{{KafkaComponent.LogsField.description}}</span>
            </div>
            <mat-form-field class="full-width">

              <input matInput placeholder="Kafka Logs location" formControlName="Logs" required>

              <mat-hint align="start">{{KafkaComponent.LogsField.description}}</mat-hint>
              <mat-error *ngFor="let validation of KafkaComponent.LogsField.validationMsg">
                <mat-error class="error-message" *ngIf="KafkaForm.get('Logs').hasError(validation.type) && (KafkaForm.get('Logs').dirty || KafkaForm.get('Logs').touched)">{{validation.message}}</mat-error>
              </mat-error>
            </mat-form-field>
          </div>

          <div class="field-container">
            <div class="popup" align="end">
              <mat-icon align="end" svgIcon="info" (mouseenter)="infoPopUp('ReplicationFactor_info')" (mouseleave)="infoPopUp('ReplicationFactor_info')">
              </mat-icon>
              <span class="popuptext" id="ReplicationFactor_info">{{KafkaComponent.ReplicationFactorField.description}}</span>
            </div>
            <mat-form-field class="full-width">

              <input matInput type="number" placeholder="Kafka Replication Factor" formControlName="ReplicationFactor"
                required>

              <mat-hint align="start">{{KafkaComponent.ReplicationFactorField.description}}</mat-hint>
              <mat-error *ngFor="let validation of KafkaComponent.ReplicationFactorField.validationMsg">
                <mat-error class="error-message" *ngIf="KafkaForm.get('ReplicationFactor').hasError(validation.type) && (KafkaForm.get('ReplicationFactor').dirty || KafkaForm.get('ReplicationFactor').touched)">{{validation.message}}</mat-error>
              </mat-error>
            </mat-form-field>
          </div>

          <div class="field-container">
            <div class="popup" align="end">
              <mat-icon align="end" svgIcon="info" (mouseenter)="infoPopUp('RunningZkId_info')" (mouseleave)="infoPopUp('RunningZkId_info')">
              </mat-icon>
              <span class="popuptext" id="RunningZkId_info">{{KafkaComponent.RunningZkIdField.description}}</span>
            </div>
            <mat-form-field class="full-width">

              <input matInput type="number" placeholder="Running Zookeeper id" formControlName="RunningZkId" required>

              <mat-hint align="start">{{KafkaComponent.RunningZkIdField.description}}</mat-hint>
              <mat-error *ngFor="let validation of KafkaComponent.RunningZkIdField.validationMsg">
                <mat-error class="error-message" *ngIf="KafkaForm.get('RunningZkId').hasError(validation.type) && (KafkaForm.get('RunningZkId').dirty || KafkaForm.get('RunningZkId').touched)">{{validation.message}}</mat-error>
              </mat-error>
            </mat-form-field>
          </div>

          <div class="field-container">
            <div class="popup" align="end">
              <mat-icon align="end" svgIcon="info" (mouseenter)="infoPopUp('TopicPartitions_info')" (mouseleave)="infoPopUp('TopicPartitions_info')">
              </mat-icon>
              <span class="popuptext" id="TopicPartitions_info">{{KafkaComponent.TopicPartitionsField.description}}</span>
            </div>
            <mat-form-field class="full-width">

              <input matInput type="number" placeholder="Topic partitions number" formControlName="TopicPartitions"
                required>

              <mat-hint align="start">{{KafkaComponent.TopicPartitionsField.description}}</mat-hint>
              <mat-error *ngFor="let validation of KafkaComponent.TopicPartitionsField.validationMsg">
                <mat-error class="error-message" *ngIf="KafkaForm.get('TopicPartitions').hasError(validation.type) && (KafkaForm.get('TopicPartitions').dirty || KafkaForm.get('TopicPartitions').touched)">{{validation.message}}</mat-error>
              </mat-error>
            </mat-form-field>
          </div>

          <div class="field-container">
            <div class="popup" align="end">
              <mat-icon align="end" svgIcon="info" (mouseenter)="infoPopUp('TopicLogs_info')" (mouseleave)="infoPopUp('TopicLogs_info')">
              </mat-icon>
              <span class="popuptext" id="TopicLogs_info">{{KafkaComponent.TopicLogsField.description}}</span>
            </div>
            <mat-form-field class="full-width">

              <input matInput placeholder="Logs per topic location" formControlName="TopicLogs" required>

              <mat-hint align="start">{{KafkaComponent.TopicLogsField.description}}</mat-hint>
              <mat-error *ngFor="let validation of KafkaComponent.TopicLogsField.validationMsg">
                <mat-error class="error-message" *ngIf="KafkaForm.get('TopicLogs').hasError(validation.type) && (KafkaForm.get('TopicLogs').dirty || KafkaForm.get('TopicLogs').touched)">{{validation.message}}</mat-error>
              </mat-error>
            </mat-form-field>
          </div>

          <div class="field-container">
            <div class="popup" align="end">
              <mat-icon align="end" svgIcon="info" (mouseenter)="infoPopUp('ClientPort_info')" (mouseleave)="infoPopUp('ClientPort_info')">
              </mat-icon>
              <span class="popuptext" id="ClientPort_info">{{KafkaComponent.ClientPortField.description}}</span>
            </div>
            <mat-form-field class="full-width">

              <input matInput type="number" placeholder="Kafka Client Port" formControlName="ClientPort" required>

              <mat-hint align="start">{{KafkaComponent.ClientPortField.description}}</mat-hint>
              <mat-error *ngFor="let validation of KafkaComponent.ClientPortField.validationMsg">
                <mat-error class="error-message" *ngIf="KafkaForm.get('ClientPort').hasError(validation.type) && (KafkaForm.get('ClientPort').dirty || KafkaForm.get('ClientPort').touched)">{{validation.message}}</mat-error>
              </mat-error>
            </mat-form-field>
          </div>
          <div class="field-container">
              <div class="popup" align="end">
                <mat-icon align="end" svgIcon="info" (mouseenter)="infoPopUp('ZKClientPort_info')" (mouseleave)="infoPopUp('ZKClientPort_info')">
                </mat-icon>
                <span class="popuptext" id="ZKClientPort_info">{{KafkaComponent.ZKClientPortField.description}}</span>
              </div>
              <mat-form-field class="full-width">
  
                <input matInput type="number" placeholder="Zookeeper Client Port" formControlName="ZKClientPort" required>
  
                <mat-hint align="start">{{KafkaComponent.ZKClientPortField.description}}</mat-hint>
                <mat-error *ngFor="let validation of KafkaComponent.ZKClientPortField.validationMsg">
                  <mat-error class="error-message" *ngIf="KafkaForm.get('ZKClientPort').hasError(validation.type) && (KafkaForm.get('ZKClientPort').dirty || KafkaForm.get('ZKClientPort').touched)">{{validation.message}}</mat-error>
                </mat-error>
              </mat-form-field>
            </div>





          <div>
            <button mat-button matStepperPrevious>Back</button>
            <button class="submit-btn" mat-button [disabled]="!KafkaForm.valid" matStepperNext>Next</button>
          </div>

        </form>
      </mat-step>

      <mat-step *ngIf="EnvironmentGeneralForm.get('industries').value != 'semi'" [stepControl]="userDetailsForm">
        <form [formGroup]="userDetailsForm" (ngSubmit)="onSubmitUserDetails(userDetailsForm.value)">
          <ng-template matStepLabel>Pentaho</ng-template>



          <div>
            <button mat-button matStepperPrevious>Back</button>
            <button class="submit-btn" mat-button matStepperNext>Next</button>
          </div>

        </form>
      </mat-step>

      <mat-step [stepControl]="userDetailsForm">
        <form [formGroup]="userDetailsForm" (ngSubmit)="finishForm()">
          <ng-template matStepLabel>Finish Page</ng-template>



          <div>
            <button mat-button matStepperPrevious>Back</button>
            <button class="submit-btn" mat-button matStepperNext>Finish</button>
          </div>

        </form>
      </mat-step>












    </mat-horizontal-stepper>

  </div>
</div>